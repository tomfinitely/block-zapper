(()=>{"use strict";var e,o={687:()=>{const e=window.wp.blocks,o=window.wp.i18n,t=window.wp.blockEditor,a=window.wp.components,i=window.wp.data,r=window.wp.element,l=window.ReactJSXRuntime,s=JSON.parse('{"UU":"telex/block-zapper"}');(0,e.registerBlockType)(s.UU,{edit:function(s){var n,c,d,p,m,u,g;const{clientId:b,attributes:h,setAttributes:k}=s,v=(0,t.useBlockProps)(),[y,C]=(0,r.useState)(!1),[x,f]=(0,r.useState)(""),[z,S]=(0,r.useState)(null),[w,A]=(0,r.useState)("selective"),[B,j]=(0,r.useState)({blockSettings:null===(n=h.zapBlockSettings)||void 0===n||n,blockStyles:null===(c=h.zapBlockStyles)||void 0===c||c,customProperties:null===(d=h.zapCustomProperties)||void 0===d||d,keepMedia:null===(p=h.zapKeepMedia)||void 0===p||p,customClasses:null===(m=h.zapCustomClasses)||void 0===m||m,customAnchors:null===(u=h.zapCustomAnchors)||void 0===u||u,htmlElements:null===(g=h.zapHtmlElements)||void 0===g||g}),{updateBlockAttributes:P,replaceBlock:E}=(0,i.useDispatch)("core/block-editor"),_=(0,i.useSelect)(e=>{try{const o=e("core/block-editor").getBlocks(b);return Array.isArray(o)?o:[]}catch(e){return[]}},[b]);(0,r.useEffect)(()=>{if(x){const e=setTimeout(()=>{f("")},1e4);return()=>clearTimeout(e)}},[x]),(0,r.useEffect)(()=>{k({zapBlockSettings:B.blockSettings,zapBlockStyles:B.blockStyles,zapCustomProperties:B.customProperties,zapKeepMedia:B.keepMedia,zapCustomClasses:B.customClasses,zapCustomAnchors:B.customAnchors,zapHtmlElements:B.htmlElements})},[B,k]);const T=e=>e&&"object"==typeof e&&e.attributes||{},R=(o,t=!1,a=!1)=>{if(!o||!o.name)return console.warn("Invalid block passed to createCleanBlock:",o),null;const i=T(o),{cleanedAttributes:r,removedAttributes:l}=((e,o=!1,t=!1)=>{const a=((e,o,t)=>{const a=new Set;return["content","href","text","level","tagName","value","label","placeholder","title","type","checked","selected","disabled","required","multiple","name","headers","scope"].forEach(e=>a.add(e)),e?o&&["src","srcset","sizes","alt","caption","id","url","linkDestination","linkTarget","rel","poster","preload","autoplay","controls","loop","muted","playsInline","crossOrigin","sizeSlug","blob","mediaId","mediaType","mediaUrl","aspectRatio","width","height","scale","linkClass","linkText","showDownloadButton","downloadButtonText","style","mediaPosition","mediaType","mediaUrl","mediaId","mediaAlt","mediaWidth","mediaHeight","mediaSize","mediaSizes","mediaSrcset","videoId","videoUrl","videoAlt","videoPoster","videoAutoplay","videoLoop","videoMuted","videoControls","videoPreload","imageId","imageUrl","imageAlt","imageCaption","imageWidth","imageHeight","imageSize","imageSizes","imageSrcset","imageFocalPoint","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundClip","backgroundOrigin","focalPoint","hasParallax","isRepeated","useFeaturedImage","backgroundType","overlayColor","customOverlayColor","dimRatio","gradient","customGradient","metadata","layout","minHeight","minHeightUnit","icon","iconName","iconLibrary","iconSet","iconSize","iconColor","iconBackgroundColor","iconBorderColor","iconBorderRadius","iconBorderWidth","iconPadding","iconMargin","iconRotation","iconFlip","iconAlign","iconLink","iconLinkTarget","iconLinkRel","iconCustomSvg","iconCustomPath","iconCustomViewBox","iconCustomWidth","iconCustomHeight"].forEach(e=>a.add(e)):(o&&["src","srcset","sizes","alt","caption","id","url","linkDestination","linkTarget","rel","poster","preload","autoplay","controls","loop","muted","playsInline","crossOrigin","sizeSlug","blob","mediaId","mediaType","mediaUrl","aspectRatio","width","height","scale","linkClass","linkText","showDownloadButton","downloadButtonText","style","mediaPosition","mediaType","mediaUrl","mediaId","mediaAlt","mediaWidth","mediaHeight","mediaSize","mediaSizes","mediaSrcset","videoId","videoUrl","videoAlt","videoPoster","videoAutoplay","videoLoop","videoMuted","videoControls","videoPreload","imageId","imageUrl","imageAlt","imageCaption","imageWidth","imageHeight","imageSize","imageSizes","imageSrcset","imageFocalPoint","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","backgroundAttachment","backgroundClip","backgroundOrigin","focalPoint","hasParallax","isRepeated","useFeaturedImage","backgroundType","overlayColor","customOverlayColor","dimRatio","gradient","customGradient","metadata","layout","minHeight","minHeightUnit","icon","iconName","iconLibrary","iconSet","iconSize","iconColor","iconBackgroundColor","iconBorderColor","iconBorderRadius","iconBorderWidth","iconPadding","iconMargin","iconRotation","iconFlip","iconAlign","iconLink","iconLinkTarget","iconLinkRel","iconCustomSvg","iconCustomPath","iconCustomViewBox","iconCustomWidth","iconCustomHeight"].forEach(e=>a.add(e)),t.blockSettings||["orientation","verticalAlignment","templateLock","allowedBlocks","layout","templateInsertUpdatesSelection"].forEach(e=>a.add(e)),t.blockStyles||["backgroundColor","textColor","customBackgroundColor","customTextColor","gradient","customGradient","overlayColor","customOverlayColor"].forEach(e=>a.add(e)),t.customProperties||["fontSize","customFontSize","fontFamily","fontStyle","fontWeight","letterSpacing","textDecoration","textTransform","lineHeight","margin","padding","blockGap","borderColor","customBorderColor","borderRadius","borderWidth","borderStyle","shadow","filter","position","zIndex","top","right","bottom","left"].forEach(e=>a.add(e)),t.customClasses||["className"].forEach(e=>a.add(e)),t.customAnchors||["anchor"].forEach(e=>a.add(e)),t.htmlElements||["align","nodeName"].forEach(e=>a.add(e))),a})(o,t,B),i={},r=[];return Object.keys(e).forEach(o=>{a.has(o)?i[o]=e[o]:r.push(o)}),{cleanedAttributes:i,removedAttributes:r}})(i,t,a),s=[];Array.isArray(o.innerBlocks)&&o.innerBlocks.forEach(e=>{const o=R(e,t,a);o&&o.cleanBlock&&s.push(o.cleanBlock)});try{return{cleanBlock:(0,e.createBlock)(o.name,r,s),removedAttributes:l}}catch(e){return null}},I=(e,o)=>{j(t=>({...t,[e]:o}))},L=Array.isArray(_)?_.reduce((e,o)=>{const t=T(o);return e+Object.keys(t).length},0):0,M=Array.isArray(_)?_.length:0,O=B.blockSettings||B.blockStyles||B.customProperties||B.customClasses||B.customAnchors||B.htmlElements,Z="mega"===w?{label:y?(0,o.__)("ðŸ’¥ MEGA ZAPPING...","block-zapper-block-wp"):(0,o.__)("ðŸ’¥ MEGA ZAP!","block-zapper-block-wp"),ariaLabel:(0,o.__)("Mega Zap: Remove all styling properties while preserving content and media","block-zapper-block-wp"),color:"#dd0000",hoverColor:"#bb0000",activeColor:"#990000",disabled:y||0===M}:{label:y?(0,o.__)("âš¡ SELECTIVE ZAPPING...","block-zapper-block-wp"):(0,o.__)("âš¡ SELECTIVE ZAP!","block-zapper-block-wp"),ariaLabel:O?(0,o.__)("Selective Zap: Remove selected property categories","block-zapper-block-wp"):(0,o.__)("Select at least one zap option to enable","block-zapper-block-wp"),color:O?"#ff4444":"#ccc",hoverColor:"#cc3333",activeColor:"#aa2222",disabled:y||0===M||!O};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.InspectorControls,{children:(0,l.jsxs)(a.PanelBody,{title:(0,o.__)("âš¡ Block Zapper Controls","block-zapper-block-wp"),initialOpen:!0,children:[(0,l.jsx)(a.Card,{children:(0,l.jsx)(a.CardBody,{children:(0,l.jsxs)("div",{style:{marginBottom:"16px",fontSize:"14px"},children:[(0,l.jsx)("strong",{children:"ðŸ“¦ Container Status:"}),(0,l.jsx)("br",{}),"ðŸ§± ",M," block(s) inside",(0,l.jsx)("br",{}),"ðŸ”¢ ",L," total properties",z&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("br",{}),"ðŸ• Last zap: ",z]})]})})}),(0,l.jsxs)("div",{style:{margin:"16px 0"},children:[(0,l.jsx)(a.RadioControl,{label:(0,o.__)("ðŸŽ¯ Zap Mode","block-zapper-block-wp"),help:"mega"===w?(0,o.__)("Nuclear option: removes ALL styling, keeps only content + media (if selected)","block-zapper-block-wp"):(0,o.__)("Choose specific types of properties to remove with granular control","block-zapper-block-wp"),selected:w,options:[{label:"âš¡ Selective Zap (choose what to remove)",value:"selective"},{label:"ðŸ’¥ Mega Zap (nuclear option)",value:"mega"}],onChange:A,"aria-describedby":"zap-mode-description"}),(0,l.jsx)("div",{id:"zap-mode-description",className:"screen-reader-text",children:"selective"===w?(0,o.__)("Selective Zap allows you to choose specific categories to remove with granular control.","block-zapper-block-wp"):(0,o.__)("Mega Zap is the nuclear option that removes ALL styling properties while keeping only essential content and media.","block-zapper-block-wp")})]}),"selective"===w&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"zapper-media-option",style:{marginBottom:"16px",padding:"12px",backgroundColor:"#f8f9fa",border:"1px solid #e2e4e7",borderRadius:"4px"},children:[(0,l.jsx)(a.CheckboxControl,{label:"ðŸ“¸ Keep images and videos (recommended)",checked:B.keepMedia,onChange:e=>I("keepMedia",e),help:"Preserves media sources and related attributes","aria-describedby":"keep-media-description"}),(0,l.jsx)("div",{id:"keep-media-description",className:"screen-reader-text",children:(0,o.__)("When checked, preserves all media-related attributes including image sources, video settings, cover block backgrounds, and Icon Block plugin attributes.","block-zapper-block-wp")})]}),(0,l.jsx)("h4",{style:{margin:"16px 0 8px 0",fontSize:"14px",fontWeight:"600"},children:"Choose What to Zap:"}),(0,l.jsx)(a.CheckboxControl,{label:"âš™ï¸ Block settings (layout, alignment, etc.)",checked:B.blockSettings,onChange:e=>I("blockSettings",e),help:"Removes core block functionality settings"}),(0,l.jsx)(a.CheckboxControl,{label:"ðŸŽ¨ Block styles (colors, gradients, backgrounds)",checked:B.blockStyles,onChange:e=>I("blockStyles",e),help:"Removes color and gradient styling"}),(0,l.jsx)(a.CheckboxControl,{label:"ðŸ”§ Custom properties (fonts, spacing, borders, effects)",checked:B.customProperties,onChange:e=>I("customProperties",e),help:"Removes typography, margin, padding, borders, shadows"}),(0,l.jsx)(a.CheckboxControl,{label:"ðŸ“ Custom classes (Additional CSS class(es))",checked:B.customClasses,onChange:e=>I("customClasses",e),help:"Removes custom CSS classes from Advanced panel"}),(0,l.jsx)(a.CheckboxControl,{label:"âš“ Custom anchors (HTML anchor)",checked:B.customAnchors,onChange:e=>I("customAnchors",e),help:"Removes HTML anchor IDs from Advanced panel"}),(0,l.jsx)(a.CheckboxControl,{label:"ðŸ·ï¸ HTML element selections (alignment, tags)",checked:B.htmlElements,onChange:e=>I("htmlElements",e),help:"Removes alignment and HTML element choices"})]}),"mega"===w&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{style:{padding:"16px",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",margin:"16px 0"},children:[(0,l.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:"600",color:"#856404"},children:"ðŸ’¥ Mega Zap Mode"}),(0,l.jsxs)("p",{style:{margin:"0",fontSize:"13px",color:"#856404"},children:[(0,l.jsx)("strong",{children:"Warning:"})," This will remove ALL styling properties and customizations from blocks, keeping only essential content."]})]}),(0,l.jsx)("div",{className:"zapper-media-option zapper-mega-media-option",style:{padding:"12px",backgroundColor:"#f8f9fa",border:"1px solid #e2e4e7",borderRadius:"4px",marginTop:"16px"},children:(0,l.jsx)(a.CheckboxControl,{label:"ðŸ“¸ Keep images and videos (recommended)",checked:B.keepMedia,onChange:e=>I("keepMedia",e),help:"Preserves media sources and related attributes during mega zap"})})]}),(0,l.jsxs)("div",{style:{marginTop:"16px",marginBottom:"8px"},children:[(0,l.jsx)(a.Button,{variant:"secondary",onClick:()=>{C(!0);try{if(!Array.isArray(_)||0===_.length)return void f((0,o.__)("âš¡ No blocks to zap! Add some blocks inside this container first.","block-zapper-block-wp"));const e="mega"===w,t=B.keepMedia;if(!e&&!Object.entries(B).some(([e,o])=>"keepMedia"!==e&&!0===o))return void f((0,o.__)("âš ï¸ Please select at least one zap option to continue!","block-zapper-block-wp"));const a=((e,o=!1,t=!1)=>{if(!Array.isArray(e)||0===e.length)return{totalZapped:0,zapDetails:[],totalAttributesRemoved:0};let a=0;const i=[];let r=0;const l=[];return e.forEach(e=>{if(!e||!e.clientId)return void console.warn("Invalid block in zapBlocks:",e);const s=e.name?e.name.replace("core/",""):"unknown",n=T(e),c=Object.keys(n).length,d=R(e,o,t);if(!d||!d.cleanBlock)return void console.warn(`Could not create clean block for ${s}`);const p=d.cleanBlock,m=d.removedAttributes||[],u=Object.keys(p.attributes||{}).length,g=c-u;(g>0||m.length>0)&&(l.push({originalId:e.clientId,newBlock:p}),a++,r+=g,i.push({name:s,before:c,after:u,removed:g,removedAttributes:m}))}),l.forEach(({originalId:e,newBlock:o})=>{try{E(e,o)}catch(e){}}),{totalZapped:a,zapDetails:i,totalAttributesRemoved:r}})(_,e,t);if(S((new Date).toLocaleTimeString()),a.totalZapped>0){let i;if(e)i=`ðŸ’¥ MEGA ZAP COMPLETE! Nuked ${a.totalAttributesRemoved} properties from ${a.totalZapped} block(s). `,i+="Only essential content preserved",t&&(i+=" + media"),i+="! ðŸš€";else{const e=[];B.blockSettings&&e.push("âš™ï¸ settings"),B.blockStyles&&e.push("ðŸŽ¨ styles"),B.customProperties&&e.push("ðŸ”§ properties"),B.customClasses&&e.push("ðŸ“ classes"),B.customAnchors&&e.push("âš“ anchors"),B.htmlElements&&e.push("ðŸ·ï¸ elements"),i=`âš¡ SELECTIVE ZAP COMPLETE! Removed ${a.totalAttributesRemoved} properties from ${a.totalZapped} block(s). `,i+=`Zapped: ${e.join(", ")}.`,t&&(i+=" ðŸ“¸ Media preserved.")}f((0,o.__)(i,"block-zapper-block-wp"))}else{const t=e?"âœ¨ No properties found to mega zap! Blocks are already clean.":"âœ¨ No matching properties found to zap with your current settings!";f((0,o.__)(t,"block-zapper-block-wp"))}}catch(e){f((0,o.__)("âŒ Zap failed! Please try again or contact support if the issue persists.","block-zapper-block-wp"))}C(!1)},isBusy:y,disabled:Z.disabled,"aria-label":Z.ariaLabel,"aria-describedby":"zap-button-description",style:{backgroundColor:y?"#999":Z.color,color:"#fff",border:"none",borderRadius:"4px",padding:"12px 24px",fontWeight:"bold",textTransform:"uppercase",fontSize:"16px",width:"100%"},children:Z.label}),(0,l.jsx)("div",{id:"zap-button-description",className:"screen-reader-text",children:"mega"===w?(0,o.__)("Mega Zap will remove all styling properties while preserving content and media if selected.","block-zapper-block-wp"):(0,o.__)("Selective Zap will remove only the selected property categories.","block-zapper-block-wp")}),"selective"===w&&!O&&(0,l.jsx)("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px",textAlign:"center"},children:"Select at least one zap option to enable"}),"mega"===w&&0===M&&(0,l.jsx)("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px",textAlign:"center"},children:"Add blocks to the container to enable mega zap"})]}),x&&(0,l.jsx)(a.Notice,{status:x.includes("COMPLETE")?"success":x.includes("failed")?"error":"info",isDismissible:!0,onRemove:()=>f(""),style:{marginTop:"12px",fontSize:"13px"},children:x})]})}),(0,l.jsx)("div",{...v,children:(0,l.jsx)(t.InnerBlocks,{tmplateLock:!1,renderAppender:t.InnerBlocks.DefaultAppender})})]})}})}},t={};function a(e){var i=t[e];if(void 0!==i)return i.exports;var r=t[e]={exports:{}};return o[e](r,r.exports,a),r.exports}a.m=o,e=[],a.O=(o,t,i,r)=>{if(!t){var l=1/0;for(d=0;d<e.length;d++){for(var[t,i,r]=e[d],s=!0,n=0;n<t.length;n++)(!1&r||l>=r)&&Object.keys(a.O).every(e=>a.O[e](t[n]))?t.splice(n--,1):(s=!1,r<l&&(l=r));if(s){e.splice(d--,1);var c=i();void 0!==c&&(o=c)}}return o}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,i,r]},a.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={57:0,350:0};a.O.j=o=>0===e[o];var o=(o,t)=>{var i,r,[l,s,n]=t,c=0;if(l.some(o=>0!==e[o])){for(i in s)a.o(s,i)&&(a.m[i]=s[i]);if(n)var d=n(a)}for(o&&o(t);c<l.length;c++)r=l[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},t=globalThis.webpackChunkblock_zapper=globalThis.webpackChunkblock_zapper||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var i=a.O(void 0,[350],()=>a(687));i=a.O(i)})();