(()=>{"use strict";var e,o={792:()=>{const e=window.wp.blocks,o=window.wp.i18n,t=window.wp.blockEditor,s=window.wp.components,r=window.wp.data,l=window.wp.element,a=window.ReactJSXRuntime,n=JSON.parse('{"UU":"telex/block-zapper"}');(0,e.registerBlockType)(n.UU,{edit:function(n){var c,i,p,d,m,u,h;const{clientId:b,attributes:k,setAttributes:g}=n,f=(0,t.useBlockProps)(),[x,v]=(0,l.useState)(!1),[C,y]=(0,l.useState)(""),[A,z]=(0,l.useState)(null),[S,w]=(0,l.useState)("selective"),[j,E]=(0,l.useState)({blockSettings:null===(c=k.zapBlockSettings)||void 0===c||c,blockStyles:null===(i=k.zapBlockStyles)||void 0===i||i,customProperties:null===(p=k.zapCustomProperties)||void 0===p||p,keepMedia:null===(d=k.zapKeepMedia)||void 0===d||d,customClasses:null===(m=k.zapCustomClasses)||void 0===m||m,customAnchors:null===(u=k.zapCustomAnchors)||void 0===u||u,htmlElements:null===(h=k.zapHtmlElements)||void 0===h||h}),{updateBlockAttributes:B,replaceBlock:P}=(0,r.useDispatch)("core/block-editor"),_=(0,r.useSelect)(e=>{try{const o=e("core/block-editor").getBlocks(b);return Array.isArray(o)?o:[]}catch(e){return console.error("Error getting inner blocks:",e),[]}},[b]);(0,l.useEffect)(()=>{if(C){const e=setTimeout(()=>{y("")},1e4);return()=>clearTimeout(e)}},[C]),(0,l.useEffect)(()=>{g({zapBlockSettings:j.blockSettings,zapBlockStyles:j.blockStyles,zapCustomProperties:j.customProperties,zapKeepMedia:j.keepMedia,zapCustomClasses:j.customClasses,zapCustomAnchors:j.customAnchors,zapHtmlElements:j.htmlElements})},[j,g]);const M=e=>e&&"object"==typeof e&&e.attributes||{},T=(o,t=!1,s=!0)=>{if(!o||!o.name)return console.warn("Invalid block passed to createCleanBlock:",o),null;const r=M(o),{cleanedAttributes:l,removedAttributes:a}=((e,o=!1,t=!0)=>{const s={essential:["content","url","alt","caption","href","text","level","tagName","value","label","placeholder","title","type","checked","selected","disabled","required","multiple","name","id","headers","scope"],media:["src","poster","preload","autoplay","controls","loop","muted","playsInline","crossOrigin","sizeSlug","blob","mediaId","mediaType","focalPoint","hasParallax","isRepeated","minHeight","minHeightUnit"],blockSettings:["orientation","verticalAlignment","templateLock","allowedBlocks","layout","templateInsertUpdatesSelection"],blockStyles:["backgroundColor","textColor","customBackgroundColor","customTextColor","gradient","customGradient","overlayColor","customOverlayColor"],customProperties:["fontSize","customFontSize","fontFamily","fontStyle","fontWeight","letterSpacing","textDecoration","textTransform","lineHeight","style","margin","padding","blockGap","borderColor","customBorderColor","borderRadius","borderWidth","borderStyle","shadow","filter","width","height","aspectRatio","scale","position","zIndex","top","right","bottom","left"],customClasses:["className"],customAnchors:["anchor"],htmlElements:["align","nodeName"]},r=new Set(s.essential);t&&s.media.forEach(e=>r.add(e)),o||(j.blockSettings||s.blockSettings.forEach(e=>r.add(e)),j.blockStyles||s.blockStyles.forEach(e=>r.add(e)),j.customProperties||s.customProperties.forEach(e=>r.add(e)),j.customClasses||s.customClasses.forEach(e=>r.add(e)),j.customAnchors||s.customAnchors.forEach(e=>r.add(e)),j.htmlElements||s.htmlElements.forEach(e=>r.add(e)));const l={},a=[];return Object.keys(e).forEach(o=>{r.has(o)?l[o]=e[o]:a.push(o)}),{cleanedAttributes:l,removedAttributes:a}})(r,t,s),n=[];Array.isArray(o.innerBlocks)&&o.innerBlocks.forEach(e=>{const o=T(e,t,s);o&&o.cleanBlock&&n.push(o.cleanBlock)});try{return{cleanBlock:(0,e.createBlock)(o.name,l,n),removedAttributes:a}}catch(e){return console.error(`Error creating clean block for ${o.name}:`,e),null}},R=(e,o)=>{E(t=>({...t,[e]:o}))},O=Array.isArray(_)?_.reduce((e,o)=>{const t=M(o);return e+Object.keys(t).length},0):0,Z=Array.isArray(_)?_.length:0,I=j.blockSettings||j.blockStyles||j.customProperties||j.customClasses||j.customAnchors||j.htmlElements,L="mega"===S?{label:x?(0,o.__)("💥 MEGA ZAPPING...","block-zapper-block-wp"):(0,o.__)("💥 MEGA ZAP!","block-zapper-block-wp"),color:"#dd0000",hoverColor:"#bb0000",activeColor:"#990000",disabled:x||0===Z}:{label:x?(0,o.__)("⚡ SELECTIVE ZAPPING...","block-zapper-block-wp"):(0,o.__)("⚡ SELECTIVE ZAP!","block-zapper-block-wp"),color:I?"#ff4444":"#ccc",hoverColor:"#cc3333",activeColor:"#aa2222",disabled:x||0===Z||!I};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.InspectorControls,{children:(0,a.jsxs)(s.PanelBody,{title:(0,o.__)("⚡ Block Zapper Controls","block-zapper-block-wp"),initialOpen:!0,children:[(0,a.jsx)(s.Card,{children:(0,a.jsx)(s.CardBody,{children:(0,a.jsxs)("div",{style:{marginBottom:"16px",fontSize:"14px"},children:[(0,a.jsx)("strong",{children:"📦 Container Status:"}),(0,a.jsx)("br",{}),"🧱 ",Z," block(s) inside",(0,a.jsx)("br",{}),"🔢 ",O," total properties",A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("br",{}),"🕐 Last zap: ",A]})]})})}),(0,a.jsx)("div",{style:{margin:"16px 0"},children:(0,a.jsx)(s.RadioControl,{label:(0,o.__)("🎯 Zap Mode","block-zapper-block-wp"),help:"mega"===S?(0,o.__)("Nuclear option: removes ALL styling, keeps only content + media (if selected)","block-zapper-block-wp"):(0,o.__)("Choose specific types of properties to remove with granular control","block-zapper-block-wp"),selected:S,options:[{label:"⚡ Selective Zap (choose what to remove)",value:"selective"},{label:"💥 Mega Zap (nuclear option)",value:"mega"}],onChange:w})}),"selective"===S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h4",{style:{margin:"16px 0 8px 0",fontSize:"14px",fontWeight:"600"},children:"Choose What to Zap:"}),(0,a.jsx)(s.CheckboxControl,{label:"⚙️ Block settings (layout, alignment, etc.)",checked:j.blockSettings,onChange:e=>R("blockSettings",e),help:"Removes core block functionality settings"}),(0,a.jsx)(s.CheckboxControl,{label:"🎨 Block styles (colors, gradients, backgrounds)",checked:j.blockStyles,onChange:e=>R("blockStyles",e),help:"Removes color and gradient styling"}),(0,a.jsx)(s.CheckboxControl,{label:"🔧 Custom properties (fonts, spacing, borders, effects)",checked:j.customProperties,onChange:e=>R("customProperties",e),help:"Removes typography, margin, padding, borders, shadows"}),(0,a.jsx)(s.CheckboxControl,{label:"📝 Custom classes (Additional CSS class(es))",checked:j.customClasses,onChange:e=>R("customClasses",e),help:"Removes custom CSS classes from Advanced panel"}),(0,a.jsx)(s.CheckboxControl,{label:"⚓ Custom anchors (HTML anchor)",checked:j.customAnchors,onChange:e=>R("customAnchors",e),help:"Removes HTML anchor IDs from Advanced panel"}),(0,a.jsx)(s.CheckboxControl,{label:"🏷️ HTML element selections (alignment, tags)",checked:j.htmlElements,onChange:e=>R("htmlElements",e),help:"Removes alignment and HTML element choices"}),(0,a.jsx)("div",{className:"zapper-media-option",style:{marginTop:"16px",padding:"12px",backgroundColor:"#f8f9fa",border:"1px solid #e2e4e7",borderRadius:"4px"},children:(0,a.jsx)(s.CheckboxControl,{label:"📸 Keep images and videos (recommended)",checked:j.keepMedia,onChange:e=>R("keepMedia",e),help:"Preserves media sources and related attributes"})})]}),"mega"===S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{style:{padding:"16px",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"4px",margin:"16px 0"},children:[(0,a.jsx)("h4",{style:{margin:"0 0 8px 0",fontSize:"14px",fontWeight:"600",color:"#856404"},children:"💥 Mega Zap Mode"}),(0,a.jsxs)("p",{style:{margin:"0",fontSize:"13px",color:"#856404"},children:[(0,a.jsx)("strong",{children:"Warning:"})," This will remove ALL styling properties and customizations from blocks, keeping only essential content."]})]}),(0,a.jsx)("div",{className:"zapper-media-option zapper-mega-media-option",style:{padding:"12px",backgroundColor:"#f8f9fa",border:"1px solid #e2e4e7",borderRadius:"4px",marginTop:"16px"},children:(0,a.jsx)(s.CheckboxControl,{label:"📸 Keep images and videos (recommended)",checked:j.keepMedia,onChange:e=>R("keepMedia",e),help:"Preserves media sources and related attributes during mega zap"})})]}),(0,a.jsxs)("div",{style:{marginTop:"16px",marginBottom:"8px"},children:[(0,a.jsx)(s.Button,{variant:"secondary",onClick:()=>{v(!0);try{if(!Array.isArray(_)||0===_.length)return void y((0,o.__)("⚡ No blocks to zap! Add some blocks inside this container first.","block-zapper-block-wp"));const e="mega"===S;if(!e&&!Object.entries(j).some(([e,o])=>"keepMedia"!==e&&!0===o))return void y((0,o.__)("⚠️ Please select at least one zap option to continue!","block-zapper-block-wp"));const t=((e,o=!1)=>{if(!Array.isArray(e)||0===e.length)return{totalZapped:0,zapDetails:[],totalAttributesRemoved:0};const t=j.keepMedia;let s=0;const r=[];let l=0;const a=[];return e.forEach(e=>{if(!e||!e.clientId)return void console.warn("Invalid block in zapBlocks:",e);const n=e.name?e.name.replace("core/",""):"unknown",c=M(e),i=Object.keys(c).length,p=T(e,o,t);if(!p||!p.cleanBlock)return void console.warn(`Could not create clean block for ${n}`);const d=p.cleanBlock,m=p.removedAttributes||[],u=Object.keys(d.attributes||{}).length,h=i-u;(h>0||m.length>0)&&(a.push({originalId:e.clientId,newBlock:d}),s++,l+=h,r.push({name:n,before:i,after:u,removed:h,removedAttributes:m}))}),a.forEach(({originalId:e,newBlock:o})=>{try{P(e,o)}catch(e){console.error("Error replacing block:",e)}}),{totalZapped:s,zapDetails:r,totalAttributesRemoved:l}})(_,e);if(z((new Date).toLocaleTimeString()),console.log("Block Zapper Results:",{mode:S,options:j,totalBlocks:_.length,blocksZapped:t.totalZapped,totalAttributesRemoved:t.totalAttributesRemoved,details:t.zapDetails}),t.totalZapped>0){let s;if(e)s=`💥 MEGA ZAP COMPLETE! Nuked ${t.totalAttributesRemoved} properties from ${t.totalZapped} block(s). `,s+="Only essential content preserved",j.keepMedia&&(s+=" + media"),s+="! 🚀";else{const e=[];j.blockSettings&&e.push("⚙️ settings"),j.blockStyles&&e.push("🎨 styles"),j.customProperties&&e.push("🔧 properties"),j.customClasses&&e.push("📝 classes"),j.customAnchors&&e.push("⚓ anchors"),j.htmlElements&&e.push("🏷️ elements"),s=`⚡ SELECTIVE ZAP COMPLETE! Removed ${t.totalAttributesRemoved} properties from ${t.totalZapped} block(s). `,s+=`Zapped: ${e.join(", ")}.`,j.keepMedia&&(s+=" 📸 Media preserved.")}y((0,o.__)(s,"block-zapper-block-wp"))}else{const t=e?"✨ No properties found to mega zap! Blocks are already clean.":"✨ No matching properties found to zap with your current settings!";y((0,o.__)(t,"block-zapper-block-wp"))}}catch(e){console.error("Zap error:",e),y((0,o.__)("❌ Zap failed! Check the console for details: "+(e.message||"Unknown error"),"block-zapper-block-wp"))}v(!1)},isBusy:x,disabled:L.disabled,style:{backgroundColor:x?"#999":L.color,color:"#fff",border:"none",borderRadius:"4px",padding:"12px 24px",fontWeight:"bold",textTransform:"uppercase",fontSize:"16px",width:"100%"},children:L.label}),"selective"===S&&!I&&(0,a.jsx)("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px",textAlign:"center"},children:"Select at least one zap option to enable"}),"mega"===S&&0===Z&&(0,a.jsx)("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px",textAlign:"center"},children:"Add blocks to the container to enable mega zap"})]}),C&&(0,a.jsx)(s.Notice,{status:C.includes("COMPLETE")?"success":C.includes("failed")?"error":"info",isDismissible:!0,onRemove:()=>y(""),style:{marginTop:"12px",fontSize:"13px"},children:C})]})}),(0,a.jsx)("div",{...f,children:(0,a.jsx)(t.InnerBlocks,{templateLock:!1,renderAppender:t.InnerBlocks.DefaultAppender})})]})}})}},t={};function s(e){var r=t[e];if(void 0!==r)return r.exports;var l=t[e]={exports:{}};return o[e](l,l.exports,s),l.exports}s.m=o,e=[],s.O=(o,t,r,l)=>{if(!t){var a=1/0;for(p=0;p<e.length;p++){for(var[t,r,l]=e[p],n=!0,c=0;c<t.length;c++)(!1&l||a>=l)&&Object.keys(s.O).every(e=>s.O[e](t[c]))?t.splice(c--,1):(n=!1,l<a&&(a=l));if(n){e.splice(p--,1);var i=r();void 0!==i&&(o=i)}}return o}l=l||0;for(var p=e.length;p>0&&e[p-1][2]>l;p--)e[p]=e[p-1];e[p]=[t,r,l]},s.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={57:0,350:0};s.O.j=o=>0===e[o];var o=(o,t)=>{var r,l,[a,n,c]=t,i=0;if(a.some(o=>0!==e[o])){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(c)var p=c(s)}for(o&&o(t);i<a.length;i++)l=a[i],s.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return s.O(p)},t=globalThis.webpackChunkblock_zapper=globalThis.webpackChunkblock_zapper||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var r=s.O(void 0,[350],()=>s(792));r=s.O(r)})();